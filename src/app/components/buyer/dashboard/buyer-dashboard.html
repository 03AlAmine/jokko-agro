<div class="dashboard-container">

  <!-- Main Content -->
  <main class="main-content">
    <!-- Header -->
    <header class="main-header">
      <div class="header-left">
        <h1>Bienvenue sur le march√©</h1>
        <p class="welcome-text">D√©couvrez des produits frais et certifi√©s pr√®s de chez vous</p>
      </div>
      <div class="header-right">
        <div class="search-box">
          <input type="text" placeholder="Rechercher un produit...">
          <button class="search-btn">üîç</button>
        </div>
        <div class="quick-actions">
          <button routerLink="/buyer/scan" class="quick-btn">
            üì± Scanner QR
          </button>
        </div>
      </div>
    </header>

    <!-- Stats Grid -->
    <div class="stats-grid">
      <div
        *ngFor="let stat of stats"
        class="stat-card"
        [routerLink]="stat.link"
        [ngStyle]="{borderLeftColor: stat.color}"
      >
        <div class="stat-icon" [ngStyle]="{backgroundColor: stat.color + '20'}">
          {{ stat.icon }}
        </div>
        <div class="stat-info">
          <h3>{{ stat.value }}</h3>
          <p>{{ stat.label }}</p>
        </div>
      </div>
    </div>

    <!-- Categories -->
    <div class="dashboard-section">
      <div class="section-header">
        <h2>Cat√©gories populaires</h2>
        <a routerLink="/buyer/market" class="view-all">Tout voir ‚Üí</a>
      </div>

      <div class="categories-grid">
        <div *ngFor="let category of categories" class="category-card">
          <div class="category-icon">{{ category.icon }}</div>
          <h4>{{ category.name }}</h4>
          <p>{{ category.count }} produits</p>
        </div>
      </div>
    </div>

    <!-- Recent Purchases -->
    <div class="dashboard-section">
      <div class="section-header">
        <h2>Achats r√©cents</h2>
        <a routerLink="/buyer/purchases" class="view-all">Voir tout ‚Üí</a>
      </div>

      <div class="table-container">
        <table class="purchases-table">
          <thead>
            <tr>
              <th>Commande</th>
              <th>Produit</th>
              <th>Producteur</th>
              <th>Date</th>
              <th>Montant</th>
              <th>Statut</th>
              <th>Certifi√©</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let purchase of recentPurchases">
              <td>#{{ purchase.id }}</td>
              <td class="product-cell">{{ purchase.product }}</td>
              <td>{{ purchase.producer }}</td>
              <td>{{ purchase.date }}</td>
              <td class="amount">{{ formatPrice(purchase.amount) }}</td>
              <td>
                <span class="status-badge" [ngStyle]="{backgroundColor: getStatusColor(purchase.status)}">
                  {{ getStatusText(purchase.status) }}
                </span>
              </td>
              <td>
                <span *ngIf="purchase.certified" class="certified-badge">‚úÖ Certifi√©</span>
                <span *ngIf="!purchase.certified" class="not-certified">Non certifi√©</span>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- Recommended Products -->
    <div class="dashboard-section">
      <div class="section-header">
        <h2>Produits recommand√©s</h2>
        <p class="section-subtitle">Bas√© sur vos achats pr√©c√©dents</p>
      </div>

      <div class="products-grid">
        <div *ngFor="let product of recommendedProducts" class="product-card">
          <div class="product-image">
            {{ product.image }}
            <span *ngIf="product.certified" class="certified-tag">‚úî Certifi√©</span>
          </div>
          <div class="product-info">
            <h4>{{ product.name }}</h4>
            <p class="producer">{{ product.producer }}</p>
            <div class="product-meta">
              <span class="price">{{ formatPrice(product.price) }}</span>
              <span class="rating">‚≠ê {{ product.rating }}</span>
            </div>
            <button class="add-to-cart">Ajouter au panier</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Tips Section -->
    <div class="tips-section">
      <div class="tip-card">
        <h3>üí° Pourquoi choisir des produits certifi√©s ?</h3>
        <ul>
          <li>‚úÖ Tra√ßabilit√© garantie</li>
          <li>‚úÖ Qualit√© v√©rifi√©e</li>
          <li>‚úÖ Soutien aux producteurs locaux</li>
          <li>‚úÖ Fra√Æcheur assur√©e</li>
        </ul>
      </div>
      <div class="tip-card">
        <h3>üì± Comment scanner un QR code ?</h3>
        <ol>
          <li>Ouvrez l'application</li>
          <li>Cliquez sur "Scanner QR"</li>
          <li>Pointez sur le code du produit</li>
          <li>V√©rifiez les informations</li>
        </ol>
        <button routerLink="/buyer/scan" class="scan-btn">
          Essayer maintenant
        </button>
      </div>
    </div>
  </main>


</div>
