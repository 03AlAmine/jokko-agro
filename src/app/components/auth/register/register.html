<div class="register-container">
  <div class="register-card">
    <div class="register-header">
      <h1>Cr√©er un compte</h1>
      <p>Rejoignez la communaut√© Jokko Agro</p>
    </div>

    <!-- Message d'erreur -->
    <div *ngIf="errorMessage" class="error-message">
      {{ errorMessage }}
    </div>

    <form (ngSubmit)="onSubmit()" class="register-form" #registerForm="ngForm">
      <div class="form-group">
        <label for="fullName">Nom complet *</label>
        <input
          type="text"
          id="fullName"
          [(ngModel)]="userData.fullName"
          name="fullName"
          required
          placeholder="Votre nom complet"
          #fullName="ngModel"
        >
        <div *ngIf="fullName.invalid && fullName.touched" class="error-text">
          Le nom complet est obligatoire
        </div>
      </div>

      <div class="form-group">
        <label for="phone">Num√©ro de t√©l√©phone *</label>
        <input
          type="tel"
          id="phone"
          [(ngModel)]="userData.phone"
          name="phone"
          required
          placeholder="77 123 45 67"
          pattern="^(77|78|70|76)[0-9]{7}$"
          #phone="ngModel"
        >
        <div *ngIf="phone.invalid && phone.touched" class="error-text">
          Num√©ro de t√©l√©phone invalide (format: 77 123 45 67)
        </div>
      </div>

      <div class="form-group">
        <label for="email">Email *</label>
        <input
          type="email"
          id="email"
          [(ngModel)]="userData.email"
          name="email"
          required
          placeholder="exemple@email.com"
          pattern="[^@\s]+@[^@\s]+\.[^@\s]+"
          #email="ngModel"
        >
        <div *ngIf="email.invalid && email.touched" class="error-text">
          Email invalide
        </div>
      </div>

      <!-- Ajoutez ce champ pour la localisation -->
      <div class="form-group">
        <label for="location">Localisation *</label>
        <select
          id="location"
          [(ngModel)]="userData.location"
          name="location"
          required
          #location="ngModel"
        >
          <option value="">S√©lectionnez votre r√©gion</option>
          <option value="Dakar">Dakar</option>
          <option value="Thi√®s">Thi√®s</option>
          <option value="Saint-Louis">Saint-Louis</option>
          <option value="Kaolack">Kaolack</option>
          <option value="Ziguinchor">Ziguinchor</option>
          <option value="Diourbel">Diourbel</option>
          <option value="Louga">Louga</option>
          <option value="Tambacounda">Tambacounda</option>
          <option value="Kolda">Kolda</option>
          <option value="Matam">Matam</option>
          <option value="K√©dougou">K√©dougou</option>
          <option value="S√©dhiou">S√©dhiou</option>
          <option value="Autre">Autre r√©gion</option>
        </select>
        <div *ngIf="location.invalid && location.touched" class="error-text">
          Veuillez s√©lectionner votre localisation
        </div>
      </div>

      <div class="form-group">
        <label for="password">Mot de passe *</label>
        <input
          type="password"
          id="password"
          [(ngModel)]="userData.password"
          name="password"
          required
          minlength="6"
          placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"
          #password="ngModel"
        >
        <div *ngIf="password.invalid && password.touched" class="error-text">
          Le mot de passe doit contenir au moins 6 caract√®res
        </div>
      </div>

      <div class="form-group">
        <label for="confirmPassword">Confirmer le mot de passe *</label>
        <input
          type="password"
          id="confirmPassword"
          [(ngModel)]="userData.confirmPassword"
          name="confirmPassword"
          required
          placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"
          #confirmPassword="ngModel"
        >
        <div *ngIf="confirmPassword.invalid && confirmPassword.touched" class="error-text">
          Veuillez confirmer votre mot de passe
        </div>
      </div>

      <div class="form-group">
        <label>Je suis : *</label>
        <div class="role-options">
          <label class="role-option">
            <input
              type="radio"
              name="role"
              value="producer"
              [(ngModel)]="userData.role"
              required
              #role="ngModel"
            >
            <span>üë®‚Äçüåæ Producteur</span>
          </label>
          <label class="role-option">
            <input
              type="radio"
              name="role"
              value="buyer"
              [(ngModel)]="userData.role"
            >
            <span>üõí Acheteur</span>
          </label>
        </div>
        <div *ngIf="role.invalid && role.touched" class="error-text">
          Veuillez s√©lectionner un r√¥le
        </div>
      </div>

      <button
        type="submit"
        class="btn-register"
        [disabled]="isLoading || registerForm.invalid"
      >
        <span *ngIf="!isLoading">Cr√©er mon compte</span>
        <span *ngIf="isLoading">Cr√©ation en cours...</span>
      </button>
    </form>

    <div class="register-footer">
      <p>D√©j√† un compte ? <a routerLink="/login">Se connecter</a></p>
      <p><a routerLink="/">‚Üê Retour √† l'accueil</a></p>
    </div>
  </div>
</div>
