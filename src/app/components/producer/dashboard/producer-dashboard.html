<div class="dashboard-container">

  <!-- Main Content -->
  <main class="main-content">
    <!-- Header -->
    <header class="main-header">
      <div class="header-left">
        <h1>Tableau de bord</h1>
        <p class="welcome-text">
          Bonjour {{ userData?.fullName }}, voici votre activitÃ© aujourd'hui
        </p>
      </div>
      <div class="header-right">
        <div class="notification-bell">
          <span class="bell-icon">ðŸ””</span>
          <span class="notification-count" *ngIf="getUnreadCount() > 0"
            >{{ getUnreadCount() }}</span
          >
        </div>
        <div class="quick-actions">
          <button routerLink="/producer/add-product" class="quick-btn">
            âž• Ajouter un produit
          </button>
        </div>
      </div>
    </header>

    <!-- Stats Grid -->
    <div class="stats-grid">
      <div
        *ngFor="let stat of stats"
        class="stat-card"
        [routerLink]="stat.link"
        [ngStyle]="{borderLeftColor: stat.color}"
      >
        <div class="stat-icon" [ngStyle]="{backgroundColor: stat.color + '20'}">
          {{ stat.icon }}
        </div>
        <div class="stat-info">
          <h3>{{ stat.value.toLocaleString() }}</h3>
          <p>{{ stat.label }}</p>
        </div>
      </div>
    </div>

    <!-- Recent Activity Section -->
    <div class="dashboard-section">
      <div class="section-header">
        <h2>Ventes rÃ©centes</h2>
        <a routerLink="/producer/sales" class="view-all">Voir tout â†’</a>
      </div>

      <div class="table-container">
        <table class="sales-table">
          <thead>
            <tr>
              <th>Commande</th>
              <th>Produit</th>
              <th>Acheteur</th>
              <th>Date</th>
              <th>Montant</th>
              <th>Statut</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let sale of recentSales">
              <td>#{{ sale.id }}</td>
              <td class="product-cell">{{ sale.product }}</td>
              <td>{{ sale.buyer }}</td>
              <td>{{ sale.date }}</td>
              <td class="amount">{{ sale.amount.toLocaleString() }} FCFA</td>
              <td>
                <span
                  class="status-badge"
                  [ngStyle]="{backgroundColor: getStatusColor(sale.status)}"
                >
                  {{ sale.status === 'completed' ? 'ComplÃ©tÃ©' : sale.status ===
                  'pending' ? 'En attente' : 'AnnulÃ©' }}
                </span>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- Notifications & Quick Actions -->
    <div class="dashboard-section">
      <div class="section-header">
        <h2>Notifications rÃ©centes</h2>
        <button class="mark-read" (click)="markAllAsRead()">
          Tout marquer comme lu
        </button>
      </div>

      <div class="notifications-list">
        <div
          *ngFor="let notification of notifications"
          class="notification-item"
          [class.unread]="!notification.read"
        >
          <div class="notification-icon">
            <span *ngIf="!notification.read" class="unread-dot"></span>
            ðŸ“Œ
          </div>
          <div class="notification-content">
            <h4>{{ notification.title }}</h4>
            <p>{{ notification.message }}</p>
            <span class="notification-time">{{ notification.time }}</span>
          </div>
          <button
            *ngIf="!notification.read"
            class="mark-btn"
            (click)="markAsRead(notification.id)"
          >
            Marquer lu
          </button>
        </div>
      </div>
    </div>

    <!-- Quick Stats -->
    <div class="quick-stats">
      <div class="stat-box">
        <h3>ðŸŽ¯ Objectifs du mois</h3>
        <p>Ventes: <strong>8/10 produits</strong></p>
        <div class="progress-bar">
          <div class="progress-fill" [style.width]="'80%'"></div>
        </div>
      </div>
      <div class="stat-box">
        <h3>ðŸ“ˆ Performance</h3>
        <p>Augmentation des ventes: <strong>+15%</strong></p>
        <p class="trend up">â†‘ Meilleur mois</p>
      </div>
      <div class="stat-box">
        <h3>ðŸ’¡ Conseil du jour</h3>
        <p>
          Pensez Ã  certifier vos produits bio pour augmenter leur valeur de 30%
        </p>
        <button routerLink="/producer/certifications" class="advice-btn">
          Certifier maintenant
        </button>
      </div>
    </div>
  </main>

</div>
